{"version":3,"sources":["search.js","button.js","table.js","App.js","index.js"],"names":["Search","_ref","value","onChange","onSubmit","children","react_default","a","createElement","type","Button","onClick","_ref$className","className","largeColumn","width","midColumn","smallColumn","Table","list","onDismiss","map","item","key","objectID","style","href","url","title","author","num_comments","points","src_button","DEFAULT_QUERY","PATH_BASE","PATH_SEARCH","PARAM_SEARCH","PARAM_PAGE","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","needsToSearchTopStories","searchTerm","state","results","setSearchTopStories","result","hits","page","_this$state","searchKey","oldHits","updatedHits","toConsumableArray","concat","setState","objectSpread","defineProperty","fetchSearchTopStories","arguments","length","undefined","fetch","then","response","json","catch","error","id","_this$state2","_results$searchKey","filter","onSearchSubmit","event","preventDefault","onSearchChange","target","_this2","_this$state3","search","table","Component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.f0568a83.chunk.js","sourcesContent":["import React from 'react'\n\nconst Search = ({value, onChange, onSubmit, children}) =>\n  <form onSubmit={onSubmit}>\n    <input\n      type='text'\n      value={value}\n      onChange={onChange}\n    />\n    <button type='submit'>\n      {children}\n    </button>\n  </form>\n\nexport default Search\n","import React from 'react'\n\nconst Button = ({onClick, className = '', children}) =>\n  <button\n    onClick={onClick}\n    className={className}\n    type='button'>\n    {children}\n  </button>\n\nexport default Button\n","import React from 'react'\nimport Button from './button'\n\nconst largeColumn = {\n  width: '40%'\n}\nconst midColumn = {\n  width: '30%'\n}\nconst smallColumn = {\n  width: '10%'\n}\n\nconst Table = ({list, onDismiss}) =>\n  <div className='table'>\n    {list.map(item =>\n      <div key={item.objectID} className='table-row'>\n        <span style={largeColumn}>\n          <a href={item.url}>\n            {item.title}\n          </a>\n        </span>\n        <span style={midColumn}>\n          {item.author}\n        </span>\n        <span style={smallColumn}>\n          {item.num_comments}\n        </span>\n        <span style={smallColumn}>\n          {item.points}\n        </span>\n        <span style={smallColumn}>\n          <Button\n            onClick={() => onDismiss(item.objectID)}\n            className='button-inline'>\n              Dismiss\n          </Button>\n        </span>\n      </div>\n    )}\n  </div>\n\nexport default Table\n","import React, { Component } from 'react'\nimport Search from './search'\nimport Table from './table'\nimport Button from './button'\nimport './App.css'\n\nconst DEFAULT_QUERY = 'react'\n\nconst PATH_BASE = 'https://hn.algolia.com/api/v1'\nconst PATH_SEARCH = '/search'\nconst PARAM_SEARCH = 'query='\nconst PARAM_PAGE = 'page='\n\nclass App extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      results: null,\n      searchKey: '',\n      searchTerm: DEFAULT_QUERY,\n      error: null\n    }\n  }\n  needsToSearchTopStories = searchTerm => {\n    return !this.state.results[searchTerm]\n  }\n  setSearchTopStories = result => {\n    const {hits, page} = result\n    const {searchKey, results} = this.state\n    const oldHits = results && results[searchKey]\n      ? results[searchKey].hits\n      : []\n    const updatedHits = [\n      ...oldHits,\n      ...hits\n    ]\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: { hits: updatedHits, page}\n      }\n    })\n  }\n  fetchSearchTopStories = (searchTerm, page=0) => {\n    const url = `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&${PARAM_PAGE}${page}`\n    fetch(url)\n      .then(response => response.json())\n      .then(result => this.setSearchTopStories(result))\n      .catch(error => this.setState({error}))\n  }\n  componentDidMount() {\n    const {searchTerm} = this.state\n    this.setState({searchKey: searchTerm})\n    this.fetchSearchTopStories(searchTerm)\n  }\n  onDismiss = id => {\n    const {searchKey, results} = this.state\n    const {hits, page} = results[searchKey]\n    const isNotId = item => item.objectID !== id\n    const updatedHits = hits.filter(isNotId)\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: {hits: updatedHits, page}\n      }\n    })\n  }\n  onSearchSubmit = (event) => {\n    const {searchTerm} = this.state\n    this.setState({searchKey: searchTerm})\n    if(this.needsToSearchTopStories(searchTerm)) {\n      this.fetchSearchTopStories(searchTerm)\n    }\n    event.preventDefault()\n  }\n  onSearchChange = event => {\n    this.setState({searchTerm: event.target.value})\n  }\n  render () {\n    const { searchTerm, results, searchKey, error } = this.state\n    const page = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].page\n    ) || 0\n    const list = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].hits\n    ) || []\n    return (\n      <div className='page'>\n        <div className='interactions'>\n          <Search\n            value={searchTerm}\n            onChange={this.onSearchChange}\n            onSubmit={this.onSearchSubmit}\n          >\n            Search\n          </Search>\n        </div>\n        { error\n          ? <div className='interactions'>\n            <p>Oops. Something went wrong</p>\n            </div>\n          : <Table\n              list={list}\n              onDismiss={this.onDismiss}\n            />\n        }\n        <div className='interactions'>\n          <Button onClick={() => this.fetchSearchTopStories(searchKey, page + 1)}>\n            More\n          </Button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\nif (module.hot) {\n  module.hot.accept()\n}\n"],"sourceRoot":""}